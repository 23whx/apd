ACGN Personality Database

项目技术文档（v2）
多语言 · 轻量数据库 · LLM角色消歧 · ACGN 人格学投票平台

🌐 1. 项目简介

ACGN Personality Database 是一个专注于动漫（Anime）、漫画（Comic）、游戏（Game）、小说（Novel）的多语言人格学投票网站。
用户可以提交作品、角色，并对角色进行多体系人格投票，包括：

MBTI（16型人格）

九型人格（含侧翼）

九型副型（Sx/So/Sp）

易学人格学（六十四卦人格类型）——新增

网站整体风格采用 EVA UI 配色（蓝紫绿），界面简洁，强调数据展示与交互体验。

🏗 2. 技术栈与架构
前端

React

TailwindCSS

Lucide 图标库

多语言支持（i18n：中/英/日）

所有图片链接均来自外链，不写入数据库

后端 / 数据层

Supabase（PostgreSQL）

存储极度精简，只存文本字段与外链

Edge Functions（可选）

处理爬虫数据清洗、LLM 消歧调用

爬虫

Firecrawl

用于抓取萌娘百科、维基百科、百度百科中的：

作品基本信息（不写入数据库）

角色列表页面链接

角色名字

角色图片外链（不写入数据库）

大模型（LLM）

DeepSeek 或 通义千问
用于角色消歧与重复名称检查（极关键）：

当用户提交作品名称时，LLM 会判断该名称是否与数据库中现有作品本质相同（别名、译名、日文名、英文名等），避免重复提交。

🧩 3. 数据库设计（Supabase · 极简版）

Supabase 容量有限 → 不存图片、不存介绍，所有图片使用外链。
用户头像只使用预设系统头像，不允许上传。

表结构
1) works（ACGN 作品表）
字段	类型	说明
id	uuid	PK
name_cn	text	中文名
name_en	text	英文名
name_jp	text	日文名
source_urls	jsonb	{ moegirl: "...", wikipedia: "...", baike: "..." }
created_by	uuid	用户ID

说明：

不保存作品介绍，只保存多语言名称与外链。

新增作品前必须通过 LLM 消歧。

2) characters（角色表）
字段	类型	说明
id	uuid	PK
work_id	uuid	所属作品
name_cn	text	中文名（若无写原名）
name_en	text	英文名（可空）
name_jp	text	日文名（可空）
avatar_url	text	角色头像外链
source_link	text	角色百科页面链接
3) personality_votes（人格学投票表）
字段	类型	说明
id	uuid	PK
character_id	uuid	角色
user_id	uuid	用户
mbti	text	MBTI 类型（可空）
enneagram	text	九型（含侧翼）例如 “5w4”
subtype	text	副型（sx / so / sp）
yi_hexagram	text	易学人格类型，64卦之一，例如 “乾为天（䷀）”
created_at	timestamp	

说明：

用户可提交多项人格类型，也可只投某一个体系。

4) users（用户表 · 精简）
字段	类型	说明
id	uuid	PK
username	text	昵称
avatar_id	int	使用预设头像列表（如 1~20）
created_at	timestamp	
🔍 4. 功能逻辑说明
功能 1：提交 ACGN 作品（含 LLM 消歧）

流程：

用户输入作品名称（中/英/日任意）

前端将名称发送到后端 → 调用 LLM

LLM 判断：

是否与已有作品重复（如英文名、别名、简称）

如重复 → 拒绝提交并提示正确名称

如果名称有效 → 执行下一步

调用 Firecrawl 依次尝试抓取：

萌娘百科 / 维基百科 / 百度百科

解析页面内容，提取：

角色名字（列表）

角色页面链接

角色图片外链

添加作品与角色数据到 Supabase

⚠ 数据库只存：名称 + 外链。
不存介绍、不存图片本体。

功能 2：角色人格学投票

用户进入角色页面，可以投票以下人格体系：

MBTI

九型（含侧翼）

副型（sx / so / sp）

六十四卦（易学人格学）

✨ 易学人格学（六十四卦）说明（新增）

易学人格学使用《易经》六十四卦对应人格类型，每卦寓意一种人格模式。例如：

乾（䷀）＝ 创造型 / 领袖型

坤（䷁）＝ 承载型 / 人本型

屯（䷂）＝ 冒险型

蒙（䷃）＝ 学习型
……

用户在投票时可直接选择 64 卦中的任意卦象人格。

数据库中字段 yi_hexagram 存储例如：

"乾为天（䷀）"

"坤为地（䷁）"

🌈 5. UI 设计要求（EVA配色）

主色：EVA-01 紫绿配色

辅助色：黛蓝、赛博绿、深灰

风格：极简、线框、未来感、监控界面式

图标：Lucide

支持夜间模式

🌍 6. 多语言支持（i18n）

支持用户界面与内容字段的中/英/日语言环境切换。

数据库层面：

作品、角色的 中英日名称独立存储

UI 文案使用 i18n

🤖 7. LLM 消歧系统（关键）

LLM 的职责：

1）判断作品名称是否重复

例如用户提交：

《进击的巨人》

Attack on Titan

Shingeki no Kyojin

LLM 需识别它们是同一作品，并 “打回” 重复提交。

2）判断是否恶意提交

例如提交：

“巨人”

“阿明的故事”

“萤火虫之墓2（不存在的作品）”

LLM 会：

检查是否为真实存在作品

判断是否与已有作品高度相似但恶意拆分

3）智能抓取选择

根据作品名称语言自动选择：

zh → 萌娘或百度百科

jp → 日文维基

en → 英文维基

🔧 8. 开发结构建议
/src
 ├─ components/
 ├─ pages/
 ├─ hooks/
 ├─ lib/
 │   ├─ supabase/
 │   ├─ firecrawl/
 │   ├─ llm/
 ├─ store/
 ├─ styles/
 └─ i18n/

🔒 9. 权限与安全

游客可浏览作品与角色

登录后方可投票

每个用户对同一角色只能投票一次（体系可更新）

防刷票机制（IP + UserID + 时间窗口）

📈 10. 后续拓展功能（可选）

作品与角色的“别名系统”

角色关系图谱

人格学统计图表（ECharts 或 Recharts）

用户人格测试入口（MBTI、64卦测试等）

作品与人物的排行榜（热度、投票数）

📦 11. 总结

本项目旨在构建一个：

多语言

数据库精简

图片外链

LLM消歧

用户自由投票

的轻量级 ACGN 人格学数据库。

以 EVA 赛博风界面 + Supabase 轻量后端 + Firecrawl 抓取生态，实现稳定、轻巧、可持续扩展的 ACGN 数据平台。